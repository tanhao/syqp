{"version":3,"sources":["JoinRoom.js"],"names":["cc","Class","extends","Component","properties","nums","default","type","Label","_inputIndex","onLoad","onEnable","onResetClicked","i","length","string","onDelClicked","onCloseClicked","node","active","parseRoomID","str","parseInt","onInput","target","num","roomId","console","log","onInputFinished","th","userManager","joinRoom"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAK;AACDC,qBAAQ,EADP;AAEDC,kBAAK,CAACP,GAAGQ,KAAJ;AAFJ,SADG;AAKRC,qBAAY;AALJ,KAHP;;AAWLC,YAAQ,kBAAY,CAEnB,CAbI;;AAeL;;AAEA;;AAEAC,cAAS,oBAAU;AACf,aAAKC,cAAL;AACH,KArBI;;AAuBLA,oBAAe,0BAAU;AACrB,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,KAAKR,IAAL,CAAUS,MAA7B,EAAqC,EAAED,CAAvC,EAAyC;AACrC,iBAAKR,IAAL,CAAUQ,CAAV,EAAaE,MAAb,GAAsB,EAAtB;AACH;AACD,aAAKN,WAAL,GAAmB,CAAnB;AACH,KA5BI;AA6BLO,kBAAa,wBAAU;AACnB,YAAG,KAAKP,WAAL,GAAmB,CAAtB,EAAwB;AACpB,iBAAKA,WAAL,IAAoB,CAApB;AACA,iBAAKJ,IAAL,CAAU,KAAKI,WAAf,EAA4BM,MAA5B,GAAqC,EAArC;AACH;AACJ,KAlCI;AAmCLE,oBAAe,0BAAU;AACrB,aAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH,KArCI;;AAwCLC,iBAAY,uBAAU;AAClB,YAAIC,MAAM,EAAV;AACA,aAAI,IAAIR,IAAI,CAAZ,EAAeA,IAAI,KAAKR,IAAL,CAAUS,MAA7B,EAAqC,EAAED,CAAvC,EAAyC;AACrCQ,mBAAO,KAAKhB,IAAL,CAAUQ,CAAV,EAAaE,MAApB;AACH;AACD,eAAOO,SAASD,GAAT,CAAP;AACH,KA9CI;;AAgDLE,aAAQ,iBAASC,MAAT,EAAgBC,GAAhB,EAAoB;AACxB,YAAG,KAAKhB,WAAL,IAAoB,KAAKJ,IAAL,CAAUS,MAAjC,EAAwC;AACpC;AACH;AACD,aAAKT,IAAL,CAAU,KAAKI,WAAf,EAA4BM,MAA5B,GAAqCU,GAArC;AACA,aAAKhB,WAAL,IAAoB,CAApB;;AAEA,YAAG,KAAKA,WAAL,IAAoB,KAAKJ,IAAL,CAAUS,MAAjC,EAAwC;AACpC,gBAAIY,SAAS,KAAKN,WAAL,EAAb;AACAO,oBAAQC,GAAR,CAAY,QAAQF,MAApB;AACA,iBAAKG,eAAL,CAAqBH,MAArB;AACH;AACJ,KA5DI;;AA8DLG,qBAAgB,yBAASH,MAAT,EAAgB;AAC5B;;;;;;;;;;;;;;AAcD,aAAKR,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACAW,WAAGC,WAAH,CAAeC,QAAf,CAAwBN,MAAxB;AACF;;AA/EI,CAAT","file":"JoinRoom.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        nums:{\r\n            default:[],\r\n            type:[cc.Label]\r\n        },\r\n        _inputIndex:0\r\n    },\r\n\r\n    onLoad: function () {\r\n        \r\n    },\r\n\r\n    // update: function (dt) {\r\n\r\n    // },\r\n    \r\n    onEnable:function(){\r\n        this.onResetClicked();\r\n    },\r\n\r\n    onResetClicked:function(){\r\n        for(var i = 0; i < this.nums.length; ++i){\r\n            this.nums[i].string = \"\";\r\n        }\r\n        this._inputIndex = 0;\r\n    },\r\n    onDelClicked:function(){\r\n        if(this._inputIndex > 0){\r\n            this._inputIndex -= 1;\r\n            this.nums[this._inputIndex].string = \"\";\r\n        }\r\n    },\r\n    onCloseClicked:function(){\r\n        this.node.active = false;\r\n    },\r\n\r\n\r\n    parseRoomID:function(){\r\n        var str = \"\";\r\n        for(var i = 0; i < this.nums.length; ++i){\r\n            str += this.nums[i].string;\r\n        }\r\n        return parseInt(str);\r\n    },\r\n\r\n    onInput:function(target,num){\r\n        if(this._inputIndex >= this.nums.length){\r\n            return;\r\n        }\r\n        this.nums[this._inputIndex].string = num;\r\n        this._inputIndex += 1;\r\n        \r\n        if(this._inputIndex == this.nums.length){\r\n            var roomId = this.parseRoomID();\r\n            console.log(\"ok:\" + roomId);\r\n            this.onInputFinished(roomId);\r\n        }\r\n    },\r\n\r\n    onInputFinished:function(roomId){\r\n        /*\r\n        th.userManager.joinRoom(roomId,function(ret){\r\n            if(ret.errcode == 0){\r\n                this.node.active = false;\r\n            }else{\r\n                var content = \"房间[\"+ roomId +\"]不存在，请重新输入!\";\r\n                if(ret.errcode == 4){\r\n                    content = \"房间[\"+ roomId + \"]已满!\";\r\n                }\r\n                th.alert.show(\"提示\",content);\r\n                this.onResetClicked();\r\n            }\r\n        }.bind(this)); \r\n        */\r\n       this.node.active = false;\r\n       th.userManager.joinRoom(roomId);\r\n    },\r\n\r\n});\r\n"]}