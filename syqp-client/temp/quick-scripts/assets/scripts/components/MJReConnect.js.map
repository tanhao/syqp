{"version":3,"sources":["MJReConnect.js"],"names":["cc","Class","extends","Component","properties","_reconnect","_lblTip","_loading_image","_lastPing","onLoad","log","find","getChildByName","self","fnTestServerOn","fn","data","node","off","active","console","game","on","EVENT_HIDE","EVENT_SHOW","update","dt","rotation"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAY,IADJ;AAERC,iBAAS,IAFD;AAGRC,wBAAgB,IAHR;AAIRC,mBAAW;AAJH,KAHP;;AAUL;AACAC,YAAQ,kBAAY;AAChBT,WAAGU,GAAH,CAAO,oBAAP;AACA,aAAKL,UAAL,GAAkBL,GAAGW,IAAH,CAAQ,kBAAR,CAAlB;AACA,aAAKJ,cAAL,GAAsB,KAAKF,UAAL,CAAgBO,cAAhB,CAA+B,eAA/B,CAAtB;AACA,YAAIC,OAAO,IAAX;;AAEA,YAAIC,iBAAiB,SAAjBA,cAAiB,GAAY;AAC7B;;;;;;;;;;;;;;;;;;;AAmBH,SApBD;;AAsBA,YAAIC,KAAK,SAALA,EAAK,CAAUC,IAAV,EAAgB;AACrBH,iBAAKI,IAAL,CAAUC,GAAV,CAAc,YAAd,EAA4BH,EAA5B;AACAF,iBAAKR,UAAL,CAAgBc,MAAhB,GAAyB,IAAzB;AACAC,oBAAQV,GAAR,CAAY,wBAAZ;AACA;AACH,SALD;;AAOAV,WAAGqB,IAAH,CAAQC,EAAR,CAAWtB,GAAGqB,IAAH,CAAQE,UAAnB,EAA+B,YAAY;AACvCH,oBAAQV,GAAR,CAAY,wBAAZ;AACH,SAFD;AAGAV,WAAGqB,IAAH,CAAQC,EAAR,CAAWtB,GAAGqB,IAAH,CAAQG,UAAnB,EAA+B,YAAY;AACvCJ,oBAAQV,GAAR,CAAY,wBAAZ;AACH,SAFD;;AAIA;;;;;;;AAOA,aAAKO,IAAL,CAAUK,EAAV,CAAa,YAAb,EAA2BP,EAA3B;AACH,KA7DI;AA8DLU,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAI,KAAKrB,UAAL,CAAgBc,MAApB,EAA4B;AACxB,iBAAKZ,cAAL,CAAoBoB,QAApB,GAA+B,KAAKpB,cAAL,CAAoBoB,QAApB,GAA+BD,KAAK,EAAnE;AACH;AACJ;AAlEI,CAAT","file":"MJReConnect.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _reconnect: null,\r\n        _lblTip: null,\r\n        _loading_image: null,\r\n        _lastPing: 0,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        cc.log(\"MJReconnect onload\");\r\n        this._reconnect = cc.find(\"Canvas/ReConnect\");\r\n        this._loading_image = this._reconnect.getChildByName(\"loading_image\");\r\n        var self = this;\r\n\r\n        var fnTestServerOn = function () {\r\n            /* cc.vv.net.test(function (ret) {\r\n                if (ret) {\r\n                    cc.vv.gameNetMgr.reset();\r\n                    //cc.director.loadScene('hall');\r\n                    var roomId = cc.vv.userMgr.oldRoomId;\r\n                    if (roomId != null) {\r\n                        cc.vv.userMgr.oldRoomId = null;\r\n                        cc.vv.userMgr.enterRoom(roomId, function (ret) {\r\n                            if (ret.errcode != 0) {\r\n                                cc.vv.gameNetMgr.roomId = null;\r\n                                cc.director.loadScene('hall');\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    setTimeout(fnTestServerOn, 3000);\r\n                }\r\n            }); */\r\n        }\r\n\r\n        var fn = function (data) {\r\n            self.node.off('disconnect', fn);\r\n            self._reconnect.active = true;\r\n            console.log(\"MJREConnect disconnect\");\r\n            ////fnTestServerOn();\r\n        };\r\n\r\n        cc.game.on(cc.game.EVENT_HIDE, function () {\r\n            console.log(\"MJREConnect EVENT_HIDE\");\r\n        });\r\n        cc.game.on(cc.game.EVENT_SHOW, function () {\r\n            console.log(\"MJREConnect EVENT_SHOW\");\r\n        });\r\n\r\n        /*\r\n        this.node.on('login_finished', function () {\r\n            self._reconnect.active = false;\r\n            self.node.on('disconnect', fn);\r\n        });\r\n        */\r\n\r\n        this.node.on('disconnect', fn);\r\n    },\r\n    update: function (dt) {\r\n        if (this._reconnect.active) {\r\n            this._loading_image.rotation = this._loading_image.rotation - dt * 45;\r\n        }\r\n    },\r\n});\r\n"]}