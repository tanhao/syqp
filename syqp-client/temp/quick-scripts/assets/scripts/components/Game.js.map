{"version":3,"sources":["Game.js"],"names":["cc","Class","extends","Component","properties","btnReady","Button","btnNo","btnTip","btnOut","wangfa","Label","dipai8","Sprite","dipai9","settingWin","Node","menuWin","_seatComponent","_myHoldPokers","_myFoldPokers","onLoad","addComponent","initView","initSeats","initEventHandlers","initWanfaLabel","initDipai","th","audioManager","playBGM","seatNames","i","length","socketIOManager","seats","seatComponent","node","getChildByName","getComponent","push","myholds","holds","j","children","sprite","spriteFrame","hideOptions","initSingleSeat","seat","index","getLocalIndex","setInfo","userId","name","score","headImgUrl","setFangzhu","creator","setReady","ready","setOffline","online","self","dataEventHandler","on","target","console","log","JSON","stringify","detail","seatIndex","getSeatIndexById","active","round","initPokers","onGameBegin","turn","setCountdown","sort","a","b","pokerId","pokerManager","getSpriteFrameByPokerId","setRestCard","string","getWanfa","dipai","getDipai","data","activeReadyBtn","isReady","userManager","onMenuClicked","onBtnDissolveRequestClicked","alert","show","sio","send","onBtnDissolveClicked","onBtnLeaveClicked","isFangzhu","onBtnSettingClicked","onBtnChatClicked","onBtnVoiceClicked","onBtnReadyClicked","onBtnTipClicked","onBtnOutClicked","onBtnNoClicked"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        btnReady:cc.Button,\r\n        btnNo:cc.Button,\r\n        btnTip:cc.Button,\r\n        btnOut:cc.Button,\r\n\r\n        wangfa:cc.Label,\r\n        dipai8:cc.Sprite,\r\n        dipai9:cc.Sprite,\r\n\r\n        settingWin:cc.Node,\r\n        menuWin:cc.Node,\r\n\r\n        _seatComponent:[],\r\n        _myHoldPokers:[],\r\n        _myFoldPokers:[]\r\n    },\r\n\r\n    onLoad () {\r\n\r\n        this.addComponent(\"Folds\");\r\n\r\n        this.initView();\r\n        this.initSeats();\r\n        this.initEventHandlers();\r\n        this.initWanfaLabel();\r\n        this.initDipai();\r\n        th.audioManager.playBGM(\"bg_fight.mp3\");\r\n    },\r\n\r\n    initView:function(){\r\n        var seatNames = [\"myself\",\"right\",\"up\",\"left\"];\r\n        for(var i=0;i<seatNames.length;i++){\r\n            if(i==2&&th.socketIOManager.seats.length==3){\r\n                continue;\r\n            }\r\n            var seatComponent=this.node.getChildByName(seatNames[i]).getChildByName('Seat').getComponent('Seat');\r\n            this._seatComponent.push(seatComponent);\r\n        }\r\n\r\n\r\n        var myholds=['Holds1','Holds2'];\r\n        for(var i=0;i<myholds.length;i++){\r\n            var holds = this.node.getChildByName('myself').getChildByName(myholds[i]);\r\n            for(var j=0;j<holds.children.length;j++){\r\n                var sprite = holds.children[j].getComponent(cc.Sprite);\r\n                this._myHoldPokers.push(sprite);\r\n                sprite.spriteFrame = null;\r\n            }\r\n        }\r\n        //this.initDragStuffs(sprite.node);\r\n        //cc.log(\"mypokers:\"+this._myHoldPokers.length);\r\n        //var realwidth = cc.director.getVisibleSize().width;\r\n        //cc.log(\"realWidth:\"+(realwidth/1280));\r\n\r\n        this.hideOptions();\r\n    },\r\n\r\n    initSeats:function(){\r\n        var seats=th.socketIOManager.seats;\r\n        for(var i = 0; i < seats.length; ++i){\r\n            this.initSingleSeat(seats[i]);\r\n        }\r\n    },\r\n\r\n    initSingleSeat:function(seat){\r\n        var index = th.socketIOManager.getLocalIndex(seat.index);\r\n        this._seatComponent[index].setInfo(seat.userId,seat.name,seat.score,seat.headImgUrl);\r\n        this._seatComponent[index].setFangzhu(seat.userId==th.socketIOManager.creator);\r\n        this._seatComponent[index].setReady(seat.ready);\r\n        this._seatComponent[index].setOffline(!seat.online);\r\n    },\r\n    \r\n\r\n    initEventHandlers:function(){\r\n        var self=this;\r\n        th.socketIOManager.dataEventHandler=this.node;\r\n\r\n        this.node.on('init_room', function (target) {\r\n            console.log('==>Gmae init_room:',JSON.stringify(target.detail));\r\n        });\r\n        //加入房间\r\n        this.node.on('join_push', function (target) {\r\n            console.log('==>Gmae join_push:',JSON.stringify(target.detail));\r\n            self.initSingleSeat(target.detail);\r\n        });\r\n        //检查IP\r\n        this.node.on('check_ip', function (target) {\r\n            console.log('==>Gmae check_ip:',JSON.stringify(target.detail));\r\n        });\r\n        //离开房间\r\n        this.node.on('leave_push', function (target) {\r\n            console.log('==>Gmae leave_push:',JSON.stringify(target.detail));\r\n            self.initSingleSeat(target.detail);\r\n        });\r\n        //解散房间\r\n        this.node.on('dissolve_push', function (target) {\r\n            console.log('==>Gmae dissolve_push:',JSON.stringify(target.detail));\r\n            \r\n        });\r\n        //其他玩家断线\r\n        this.node.on(\"offline_push\",function(target){\r\n            console.log('==>Gmae offline_push:',JSON.stringify(target.detail));\r\n            var seatIndex=th.socketIOManager.getSeatIndexById(target.detail.userId)\r\n            var index = th.socketIOManager.getLocalIndex(seatIndex);\r\n            self._seatComponent[index].setOffline(true);\r\n        })\r\n        //其他玩家上线\r\n        this.node.on(\"online_push\",function(target){\r\n            console.log('==>Gmae online_push:',JSON.stringify(target.detail));\r\n            var seatIndex=th.socketIOManager.getSeatIndexById(target.detail.userId)\r\n            var index = th.socketIOManager.getLocalIndex(seatIndex);\r\n            self._seatComponent[index].setOffline(false);\r\n        })\r\n        //自己准备返回\r\n        this.node.on(\"ready_result\",function(target){\r\n            console.log('==>Gmae ready_result:',JSON.stringify(target.detail));\r\n            var seat=target.detail;\r\n            self.btnReady.node.active = th.socketIOManager.round==0&&!seat.ready;\r\n            self.initSingleSeat(seat);\r\n        })\r\n        //其他玩家准备\r\n        this.node.on(\"ready_push\",function(target){\r\n            console.log('==>Gmae ready_push:',JSON.stringify(target.detail));\r\n            self.initSingleSeat(target.detail);\r\n        })\r\n        //玩家手上的牌\r\n        this.node.on(\"holds_push\",function(target){\r\n            console.log('==>Gmae holds_push:',JSON.stringify(target.detail));\r\n            self.initPokers();\r\n        })\r\n        //开始游戏，出头的人\r\n        this.node.on(\"begin_push\",function(target){\r\n            console.log('==>Gmae begin_push:',JSON.stringify(target.detail));\r\n            self.onGameBegin();\r\n             //第一把开局，要检查IP\r\n            if(th.socketIOManager.round == 1){\r\n                cc.log(\"check ip ....\");    \r\n            }\r\n        })\r\n\r\n\r\n        //断线\r\n        this.node.on('disconnect', function (target) {\r\n            console.log('==>Gmae disconnect:',JSON.stringify(target.detail));\r\n        });\r\n        \r\n\r\n    },\r\n    onGameBegin:function(){\r\n        //隐藏微信邀请，返回大厅，按钮，\r\n        //启动第一个倒计时\r\n        this._seatComponent[th.socketIOManager.turn].setCountdown(20);\r\n        \r\n    },\r\n    initPokers:function(){\r\n        var seats=th.socketIOManager.seats;\r\n        var seat=seats[th.socketIOManager.seatIndex];\r\n        var holds=seat.holds;\r\n        cc.log(\"initPokers:\",holds);\r\n        //排序\r\n        holds.sort(function(a,b){return a-b});\r\n        for(var i=0;i<holds.length;i++){\r\n            var pokerId=holds[i];\r\n            var sprite=this._myHoldPokers[i];\r\n            sprite.node.pokerId = pokerId;\r\n            sprite.spriteFrame = th.pokerManager.getSpriteFrameByPokerId(pokerId);\r\n            sprite.node.active = true;\r\n        }\r\n        for(var i=0;i<seats.length;i++){\r\n            this._seatComponent[i].setRestCard(holds.length);\r\n        }\r\n    },\r\n    initWanfaLabel:function(){\r\n        this.wangfa.string=th.socketIOManager.getWanfa();\r\n    },\r\n    initDipai:function(){\r\n        var dipai=th.socketIOManager.getDipai();\r\n        if(dipai==8){\r\n            this.dipai8.node.active=true;\r\n            this.dipai9.node.active=false;\r\n        }else if(dipai==9){\r\n            this.dipai8.node.active=false;\r\n            this.dipai9.node.active=true;\r\n        }else{\r\n            this.dipai8.node.active=false;\r\n            this.dipai9.node.active=false;\r\n        }\r\n    },\r\n    /*\r\n    update (dt) {\r\n    },\r\n    */\r\n\r\n    hideOptions:function(data){\r\n        this.btnOut.node.active = false;\r\n        this.btnNo.node.active = false;\r\n        this.btnTip.node.active = false;\r\n        var activeReadyBtn=th.socketIOManager.round==0&&!th.socketIOManager.isReady(th.userManager.userId)\r\n        this.btnReady.node.active = activeReadyBtn;\r\n    },\r\n\r\n    onMenuClicked:function(){\r\n        this.menuWin.active=!this.menuWin.active;\r\n    },\r\n    onBtnDissolveRequestClicked:function(){\r\n        this.menuWin.active=false;\r\n        th.alert.show(\"申请解散房间\",\"申请解散房间不会退换钻石，是否确定申请解散？\",function(){\r\n            th.sio.send(\"dissolve_request\"); \r\n        },true)\r\n    },\r\n    onBtnDissolveClicked:function(){\r\n        this.menuWin.active=false;\r\n        th.alert.show(\"解散房间\",\"解散房间不扣钻石，是否确定解散？\",function(){\r\n            th.sio.send(\"dissolve\"); \r\n        },true)\r\n    },\r\n    onBtnLeaveClicked:function(){\r\n        this.menuWin.active=false;\r\n        if(th.socketIOManager.isFangzhu()){\r\n            th.alert.show(\"离开房间\",\"您是房主，不能离开房间。\",function(){\r\n                //th.sio.send(\"leave\"); \r\n            })\r\n            return ;\r\n        }\r\n        th.alert.show(\"离开房间\",\"您确定要离开房间?\",function(){\r\n            th.sio.send(\"leave\"); \r\n        },true)\r\n    },\r\n    onBtnSettingClicked:function(){\r\n        this.menuWin.active=false;\r\n        this.settingWin.active=true;\r\n    },\r\n    onBtnChatClicked:function(){\r\n        this._seatComponent[0].setCountdown(10);\r\n        cc.log('onChatClicked==>');\r\n    },\r\n    onBtnVoiceClicked:function(){\r\n        cc.log('onVoiceClicked==>');\r\n    },\r\n    onBtnReadyClicked:function(){\r\n        cc.log('onBtnReadyClicked==>');\r\n        th.sio.send(\"ready\"); \r\n    },\r\n    onBtnTipClicked:function(){\r\n        cc.log('onBtnTipClicked==>');\r\n    },\r\n    onBtnOutClicked:function(){\r\n        cc.log('onBtnOutClicked==>');\r\n    },\r\n    onBtnNoClicked:function(){\r\n        cc.log('onBtnNoClicked==>');\r\n    },\r\n\r\n\r\n});\r\n"]}