{"version":3,"sources":["Status.js"],"names":["cc","Class","extends","Component","properties","roomId","Label","round","time","delay","battery","ProgressBar","_updateInterval","_lastUpdateTime","_red","Color","_yellow","_green","onLoad","string","th","socketIOManager","node","on","target","console","log","JSON","stringify","detail","update","dt","Date","now","sio","color","hour","getHours","min","getMinutes","progress","anysdkManager","getBatteryPercent"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACTC,gBAAOL,GAAGM,KADD;AAETC,eAAMP,GAAGM,KAFA;AAGTE,cAAKR,GAAGM,KAHC;AAITG,eAAMT,GAAGM,KAJA;AAKTI,iBAAQV,GAAGW,WALF;AAMTC,yBAAgB,IANP;AAOTC,yBAAgB,CAPP;AAQTC,cAAM,IAAId,GAAGe,KAAP,CAAa,GAAb,EAAiB,CAAjB,EAAmB,CAAnB,CARG;AASTC,iBAAS,IAAIhB,GAAGe,KAAP,CAAa,GAAb,EAAiB,GAAjB,EAAqB,CAArB,CATA;AAUTE,gBAAQ,IAAIjB,GAAGe,KAAP,CAAa,CAAb,EAAe,GAAf,EAAmB,CAAnB;AAVC,KAHP;;AAgBLG,UAhBK,oBAgBK;AACL,aAAKb,MAAL,CAAYc,MAAZ,GAAmBC,GAAGC,eAAH,CAAmBhB,MAAnB,IAA6B,QAAhD;AACA,aAAKE,KAAL,CAAWY,MAAX,GAAkBC,GAAGC,eAAH,CAAmBd,KAAnB,IAA0B,IAA1B,GAA+B,GAA/B,GAAoCa,GAAGC,eAAH,CAAmBd,KAAnB,GAAyB,EAA/E;;AAEA,aAAKe,IAAL,CAAUC,EAAV,CAAa,YAAb,EAA0B,UAASC,MAAT,EAAgB;AACvCC,oBAAQC,GAAR,CAAY,uBAAZ,EAAoCC,KAAKC,SAAL,CAAeJ,OAAOK,MAAtB,CAApC;AACA,iBAAKtB,KAAL,CAAWY,MAAX,GAAkBC,GAAGC,eAAH,CAAmBd,KAAnB,IAA0B,IAA1B,GAA+B,GAA/B,GAAoCa,GAAGC,eAAH,CAAmBd,KAAnB,GAAyB,EAA/E;AACH,SAHA;AAIJ,KAxBI;AA6BLuB,UA7BK,kBA6BGC,EA7BH,EA6BO;AACR,YAAGC,KAAKC,GAAL,KAAW,KAAKpB,eAAhB,GAAgC,KAAKD,eAAxC,EAAwD;AACpD,iBAAKH,KAAL,CAAWU,MAAX,GAAkBC,GAAGc,GAAH,CAAOzB,KAAP,GAAa,IAA/B;AACA,iBAAKI,eAAL,GAAqBmB,KAAKC,GAAL,EAArB;AACA,gBAAGb,GAAGc,GAAH,CAAOzB,KAAP,GAAe,GAAlB,EAAsB;AAClB,qBAAKA,KAAL,CAAWa,IAAX,CAAgBa,KAAhB,GAAwB,KAAKrB,IAA7B;AACH,aAFD,MAEM,IAAGM,GAAGc,GAAH,CAAOzB,KAAP,GAAe,GAAlB,EAAsB;AACxB,qBAAKA,KAAL,CAAWa,IAAX,CAAgBa,KAAhB,GAAwB,KAAKnB,OAA7B;AACH,aAFK,MAED;AACD,qBAAKP,KAAL,CAAWa,IAAX,CAAgBa,KAAhB,GAAwB,KAAKlB,MAA7B;AACH;AACD,gBAAIgB,MAAI,IAAID,IAAJ,EAAR;AACA,gBAAII,OAAKH,IAAII,QAAJ,EAAT;AACA,gBAAIC,MAAIL,IAAIM,UAAJ,EAAR;AACAH,mBAAKA,OAAK,EAAL,GAAS,MAAIA,IAAb,GAAmBA,IAAxB;AACAE,kBAAIA,MAAI,EAAJ,GAAQ,MAAIA,GAAZ,GAAiBA,GAArB;AACA,iBAAK9B,IAAL,CAAUW,MAAV,GAAiBiB,OAAK,GAAL,GAASE,GAA1B;AACA,iBAAK5B,OAAL,CAAa8B,QAAb,GAAsBpB,GAAGqB,aAAH,CAAiBC,iBAAjB,EAAtB;AACH;AACJ;AAhDI,CAAT","file":"Status.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n       roomId:cc.Label,\r\n       round:cc.Label,\r\n       time:cc.Label,\r\n       delay:cc.Label,\r\n       battery:cc.ProgressBar,\r\n       _updateInterval:1000,\r\n       _lastUpdateTime:0,\r\n       _red: new cc.Color(205,0,0),\r\n       _yellow: new cc.Color(255,200,0),\r\n       _green: new cc.Color(0,205,0)\r\n    },\r\n\r\n    onLoad () {\r\n         this.roomId.string=th.socketIOManager.roomId || '------';\r\n         this.round.string=th.socketIOManager.round==null?'-':(th.socketIOManager.round+'');\r\n         \r\n         this.node.on(\"begin_push\",function(target){\r\n            console.log('==>Status begin_push:',JSON.stringify(target.detail));\r\n            this.round.string=th.socketIOManager.round==null?'-':(th.socketIOManager.round+'');\r\n        })\r\n    },\r\n\r\n    \r\n\r\n\r\n    update (dt) {\r\n        if(Date.now()-this._lastUpdateTime>this._updateInterval){\r\n            this.delay.string=th.sio.delay+\"ms\";\r\n            this._lastUpdateTime=Date.now();\r\n            if(th.sio.delay > 800){\r\n                this.delay.node.color = this._red;\r\n            }else if(th.sio.delay > 300){\r\n                this.delay.node.color = this._yellow;\r\n            }else{\r\n                this.delay.node.color = this._green;\r\n            }\r\n            var now=new Date();\r\n            var hour=now.getHours();\r\n            var min=now.getMinutes();\r\n            hour=hour<10?('0'+hour):hour;\r\n            min=min<10?('0'+min):min;\r\n            this.time.string=hour+\":\"+min;\r\n            this.battery.progress=th.anysdkManager.getBatteryPercent();\r\n        }\r\n    },\r\n\r\n\r\n  \r\n\r\n});\r\n"]}