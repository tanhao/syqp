{"version":3,"sources":["GameScrollBar.js"],"names":["cc","Class","extends","Component","properties","_lastPosY","_isScrollBegan","onLoad","start","btnHeight","currentIndex","posY","scrollView","node","getComponent","ScrollView","buttons","getComponentsInChildren","Button","i","length","scale","Math","abs","setScale","setColor","color","update","dt","onGameBarScroll","eventType","customEventData","parseInt","getContentPosition","y","EventType","SCROLLING","SCROLL_ENDED","max","getMaxScrollOffset","scrollToOffset","p","SCROLL_BEGAN"],"mappings":"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","file":"GameScrollBar.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _lastPosY:0,\r\n        _isScrollBegan:false,\r\n    },\r\n\r\n    onLoad () {\r\n    },\r\n\r\n    start(){\r\n        var btnHeight=174;\r\n        var currentIndex=3;\r\n        var posY=0;\r\n        var scrollView=this.node.getComponent(cc.ScrollView);\r\n       var buttons=scrollView.getComponentsInChildren(cc.Button);\r\n        for(var i=0;i<buttons.length;i++){\r\n            var scale=Math.abs(posY+(3-i)*btnHeight)/800;\r\n            buttons[i].node.setScale(1-scale);\r\n            buttons[i].node.setColor(i==currentIndex?cc.color(255,255,255):cc.color(120,120,120));\r\n        }\r\n    },\r\n\r\n\r\n    update (dt) {\r\n    },\r\n\r\n\r\n    onGameBarScroll:function(scrollView, eventType, customEventData){\r\n        var posY=parseInt(scrollView.getContentPosition().y);\r\n        if(eventType=== cc.ScrollView.EventType.SCROLLING&&Math.abs(posY-this._lastPosY)>1){\r\n            this._lastPosY=posY;\r\n            var buttons=scrollView.getComponentsInChildren(cc.Button);\r\n            var btnHeight=174;\r\n            var currentIndex=parseInt((posY+(btnHeight/2)*(posY>0?1:-1))/btnHeight)+3;\r\n            currentIndex=currentIndex<0?0:currentIndex>(buttons.length-1)?(buttons.length-1):currentIndex;\r\n            for(var i=0;i<buttons.length;i++){\r\n                var scale=Math.abs(posY+(3-i)*btnHeight)/800;\r\n                buttons[i].node.setScale(1-scale);\r\n                buttons[i].node.setColor(i==currentIndex?cc.color(255,255,255):cc.color(120,120,120));\r\n            }\r\n        }else if(eventType=== cc.ScrollView.EventType.SCROLL_ENDED){\r\n            if(this._isScrollBegan){\r\n                var buttons=scrollView.getComponentsInChildren(cc.Button);\r\n                var btnHeight=174;\r\n                var currentIndex=parseInt((posY+(btnHeight/2)*(posY>0?1:-1))/btnHeight)+3;\r\n                currentIndex=currentIndex<0?0:currentIndex>(buttons.length-1)?(buttons.length-1):currentIndex;\r\n                var max=scrollView.getMaxScrollOffset().y;\r\n                scrollView.scrollToOffset(cc.p(0, max/2+(currentIndex-3)*btnHeight),1);\r\n                this._isScrollBegan=false;\r\n            }\r\n        }else if(eventType=== cc.ScrollView.EventType.SCROLL_BEGAN){\r\n            this._isScrollBegan=true;\r\n        }\r\n    }\r\n\r\n});\r\n"]}