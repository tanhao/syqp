{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\MJSeat.js"],"names":["cc","Class","extends","Component","properties","headImg","Sprite","headwho","lblName","Label","lblWinScore","lblLoseScore","offline","fangzhu","emoji","ready","banker","chat","_userId","_userName","_headImgUrl","_sex","_score","_isOffline","_isReady","_isFangzhu","_isbanker","_lastChatTime","onLoad","node","active","refresh","string","th","socketIOManager","status","setUserID","id","setUserName","name","setSex","sex","setHeadImgUrl","headImgUrl","self","loader","load","url","type","err","texture","headSpriteFrame","SpriteFrame","Rect","width","height","spriteFrame","setScale","setScore","score","setFangzhu","isFangzhu","setReady","isReady","setBanker","isbanker","setOffline","isOffline","setChat","content","getComponent","getChildByName","setEmoji","setInfo","update","dt"],"mappings":"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","file":"MJSeat.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n       headImg:cc.Sprite,\r\n       headwho:cc.Sprite,\r\n       lblName:cc.Label,\r\n       lblWinScore:cc.Label,\r\n       lblLoseScore:cc.Label,\r\n       offline:cc.Sprite,\r\n       fangzhu:cc.Sprite,\r\n       emoji:cc.Sprite,\r\n       ready:cc.Sprite,\r\n       banker:cc.Sprite,\r\n       chat:cc.Label,\r\n\r\n       _userId:null,\r\n       _userName:'--',\r\n       _headImgUrl:null,\r\n       _sex:0,\r\n       _score:0,\r\n       _isOffline:false,\r\n       _isReady:false,\r\n       _isFangzhu:false,\r\n       _isbanker:false,\r\n       _lastChatTime:-1,\r\n    },\r\n\r\n    onLoad () {\r\n        if(this.chat){\r\n            this.chat.node.active=false;\r\n        }\r\n        if(this.emoji){\r\n            this.emoji.node.active=false;\r\n        }\r\n        this.refresh();\r\n    },\r\n\r\n    refresh:function(){\r\n        if(this._userName){\r\n            this.lblName.string=this._userName;\r\n        }\r\n        if(this._score){\r\n            if(this._score>=0){\r\n                this.lblWinScore.string=this._score;\r\n                this.lblWinScore.node.active=true;\r\n                this.lblLoseScore.node.active=false;\r\n            }else{\r\n                this.lblLoseScore.string=this._score;\r\n                this.lblLoseScore.node.active=true;\r\n                this.lblWinScore.node.active=false;\r\n            }\r\n        }\r\n        if(this.offline){\r\n            this.offline.node.active = this._isOffline && this._userId != null;\r\n        }\r\n        \r\n        if(this.ready){\r\n            this.ready.node.active = this._isReady && th.socketIOManager.status==\"idle\"; \r\n        }\r\n        if(this.fangzhu){\r\n            this.fangzhu.node.active = this._isFangzhu;    \r\n        }\r\n        if(this.banker){\r\n            this.banker.node.active = this._isbanker;    \r\n        }\r\n        //this.node.active = this._userId!=null;\r\n\r\n    },\r\n\r\n    setUserID:function(id){\r\n        this._userId = id;\r\n    },\r\n\r\n    setUserName:function(name){\r\n        this._userName = name;\r\n        if(this.lblName){\r\n            this.lblName.string=this._userName;\r\n        }\r\n    },\r\n\r\n    setSex:function(sex){\r\n        this._sex=sex;\r\n    },\r\n\r\n    setHeadImgUrl:function(headImgUrl){\r\n        var self=this;\r\n        this._headImgUrl = headImgUrl;\r\n        if(this._headImgUrl && this.headImg){\r\n            this.headwho.node.active=false;\r\n            this.headImg.node.active=true;\r\n            cc.loader.load({url: this._headImgUrl, type: 'jpg'}, function (err, texture) {\r\n                if(!err){\r\n                    var headSpriteFrame = new cc.SpriteFrame(texture, cc.Rect(0, 0, texture.width, texture.height));\r\n                    self.headImg.spriteFrame=headSpriteFrame;\r\n                    self.headImg.node.setScale(2-(texture.width/94));\r\n                }\r\n            });\r\n        }else if(!this._headImgUrl &&  self.headImg){\r\n            this.headwho.node.active=true;\r\n            this.headImg.node.active=false;\r\n        }\r\n    },\r\n\r\n    setScore:function(score){\r\n        this._score = score;\r\n        if(this.lblLoseScore && this.lblWinScore){\r\n            if(this._score>=0){\r\n                this.lblWinScore.string=this._score;\r\n                this.lblWinScore.node.active=true;\r\n                this.lblLoseScore.node.active=false;\r\n            }else{\r\n                this.lblLoseScore.string=this._score;\r\n                this.lblLoseScore.node.active=true;\r\n                this.lblWinScore.node.active=false;\r\n            }\r\n        }\r\n       \r\n    },\r\n\r\n    setFangzhu:function(isFangzhu){\r\n        this._isFangzhu = isFangzhu;\r\n        if(this.fangzhu){\r\n            this.fangzhu.node.active =this._isFangzhu;\r\n        }\r\n    },\r\n    \r\n    setReady:function(isReady){\r\n        this._isReady = isReady;\r\n        if(this.ready){\r\n            this.ready.node.active = this._isReady && th.socketIOManager.status==\"idle\"; \r\n        }\r\n    },\r\n\r\n    setBanker:function(isbanker){\r\n        this._isbanker = isbanker;\r\n        if(this.banker){\r\n            this.banker.node.active = this._isbanker; \r\n        }\r\n    },\r\n    \r\n    setOffline:function(isOffline){\r\n        this._isOffline = isOffline;\r\n        if(this.offline){\r\n            this.offline.node.active = this._isOffline && this._userId != null;\r\n        }\r\n    },\r\n\r\n\r\n    setChat:function(content){\r\n        if(this.chat){\r\n            this.emoji.node.active=false;\r\n            this.chat.node.active = true;\r\n            this.chat.getComponent(cc.Label).string = content;\r\n            this.chat.getChildByName(\"chat_msg\").getComponent(cc.Label).string = content;\r\n            this._lastChatTime = 3;\r\n        }\r\n    },\r\n\r\n    setEmoji:function(emoji){\r\n        if(this.emoji){\r\n            this.chat.node.active = false;\r\n            this.emoji.node.active=true;\r\n            this._lastChatTime = 3;\r\n        }\r\n    },\r\n\r\n\r\n    setInfo:function(id,name,score,headImgUrl){\r\n        this.setUserID(id);\r\n        if(id){\r\n            this.setUserName(name);\r\n            this.setScore(score);\r\n            this.setHeadImgUrl(headImgUrl)\r\n        }else{\r\n            this.setUserName('--');\r\n            this.setScore('--');\r\n            this.setHeadImgUrl(null)\r\n        }\r\n       \r\n    },\r\n\r\n    update: function (dt) {\r\n        if(this._lastChatTime > 0){\r\n            this._lastChatTime -= dt;\r\n            if(this._lastChatTime < 0){\r\n                this.chat.node.active = false;\r\n                this.emoji.node.active = false;\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}