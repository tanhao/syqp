{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Http.js"],"names":["Http","cc","Class","extends","Component","statics","baseURL","get","path","params","callback","xhr","loader","getXMLHttpRequest","paramsStr","k","requestUrl","encodeURI","open","onreadystatechange","readyState","status","console","log","responseText","json","JSON","parse","e","send","post","setRequestHeader"],"mappings":";;;;;;AACA,IAAIA,OAAKC,GAAGC,KAAH,CAAS;AACdC,aAASF,GAAGG,SADE;;AAGdC,aAAQ;AACJC,iBAAQ,IADJ;AAEJC,aAAI,aAASC,IAAT,EAAcC,MAAd,EAAqBC,QAArB,EAA8B;AAC9B,gBAAIC,MAAMV,GAAGW,MAAH,CAAUC,iBAAV,EAAV;;AAEA,gBAAIC,YAAY,GAAhB;AACA,iBAAI,IAAIC,CAAR,IAAaN,MAAb,EAAoB;AAChB,oBAAGK,aAAa,GAAhB,EAAoB;AAChBA,iCAAa,GAAb;AACH;AACDA,6BAAaC,IAAI,GAAJ,GAAUN,OAAOM,CAAP,CAAvB;AACH;;AAED,gBAAIC,aAAWhB,KAAKM,OAAL,GAAaE,IAAb,GAAkBS,UAAUH,SAAV,CAAjC;AACAH,gBAAIO,IAAJ,CAAS,KAAT,EAAeF,UAAf,EAA0B,IAA1B;AACAL,gBAAIQ,kBAAJ,GAAyB,YAAY;AACjC,oBAAIR,IAAIS,UAAJ,IAAkB,CAAlB,IAAwBT,IAAIU,MAAJ,IAAc,GAAd,IAAqBV,IAAIU,MAAJ,GAAa,GAA9D,EAAoE;AAChE,wBAAG;AACCC,gCAAQC,GAAR,CAAY,0BAAwBZ,IAAIa,YAAxC;AACA,4BAAIC,OAAOC,KAAKC,KAAL,CAAWhB,IAAIa,YAAf,CAAX;AACAd,iCAAS,IAAT,EAAce,IAAd;AACH,qBAJD,CAIC,OAAMG,CAAN,EAAQ;AACLlB,iCAASkB,CAAT,EAAW,IAAX;AACH;AACJ;AACJ,aAVD;AAWAjB,gBAAIkB,IAAJ;AACH,SA3BG;AA4BJC,cAAK,cAAStB,IAAT,EAAcC,MAAd,EAAqBC,QAArB,EAA8B;AAC/B,gBAAIC,MAAMV,GAAGW,MAAH,CAAUC,iBAAV,EAAV;AACAF,gBAAIO,IAAJ,CAAS,MAAT,EAAiBlB,KAAKM,OAAL,GAAaE,IAA9B;AACAG,gBAAIoB,gBAAJ,CAAqB,cAArB,EAAoC,iDAApC;AACApB,gBAAIQ,kBAAJ,GAAyB,YAAY;AACjC,oBAAIR,IAAIS,UAAJ,IAAkB,CAAlB,IAAwBT,IAAIU,MAAJ,IAAc,GAAd,IAAqBV,IAAIU,MAAJ,IAAc,GAA/D,EAAqE;AACjE,wBAAG;AACC,4BAAII,OAAOC,KAAKC,KAAL,CAAWhB,IAAIa,YAAf,CAAX;AACAd,iCAAS,IAAT,EAAce,IAAd;AACH,qBAHD,CAGC,OAAMG,CAAN,EAAQ;AACLlB,iCAASkB,CAAT,EAAW,IAAX;AACH;AACJ;AACJ,aATD;AAUDjB,gBAAIkB,IAAJ,CAASpB,MAAT;AACF;;AA3CG;AAHM,CAAT,CAAT","file":"Http.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["\r\nvar Http=cc.Class({\r\n    extends: cc.Component,\r\n\r\n    statics:{\r\n        baseURL:null,\r\n        get:function(path,params,callback){\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n\r\n            var paramsStr = \"?\";\r\n            for(var k in params){\r\n                if(paramsStr != \"?\"){\r\n                    paramsStr += \"&\";\r\n                }\r\n                paramsStr += k + \"=\" + params[k];\r\n            }\r\n\r\n            var requestUrl=Http.baseURL+path+encodeURI(paramsStr);\r\n            xhr.open(\"GET\",requestUrl,true);\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                    try{\r\n                        console.log(\"try => http response:\"+xhr.responseText);\r\n                        var json = JSON.parse(xhr.responseText);\r\n                        callback(null,json);\r\n                    }catch(e){\r\n                        callback(e,null);\r\n                    }\r\n                }\r\n            };\r\n            xhr.send();\r\n        },\r\n        post:function(path,params,callback){\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n            xhr.open(\"POST\", Http.baseURL+path);\r\n            xhr.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded;charset=UTF-8\");\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status <= 207)) {\r\n                    try{\r\n                        var json = JSON.parse(xhr.responseText);\r\n                        callback(null,json);\r\n                    }catch(e){\r\n                        callback(e,null);\r\n                    }\r\n                }\r\n            }\r\n           xhr.send(params);\r\n        }\r\n\r\n    }\r\n});"]}